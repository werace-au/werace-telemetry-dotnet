version: "1.0"

metadata:
  title: WeRace iRacing Live Telemetry
  description: Live telemetry data from iRacing.

types:
  SessionState:
    type: enum
    description: "The state of the iRacing session."
    values:
      - name: Invalid
        value: 0
        description: "Invalid session state."
      - name: GetInCar
        value: 1
        description: "Getting in the car."
      - name: Warmup
        value: 2
        description: "Warmup lap."
      - name: ParadeLaps
        value: 3
        description: "Parade laps."
      - name: Racing
        value: 4
        description: "Racing."
      - name: Checkered
        value: 5
        description: "Checkered flag."
      - name: CoolDown
        value: 6
        description: "Cool down lap."

  SessionFlags:
    type: flags
    description: "Flags indicating the state of the session."
    values:
      - name: "checkered"
        value: 0x00000001
        description: "Checkered flag is being shown"
      - name: "white"
        value: 0x00000002
        description: "White flag is being shown"
      - name: "green"
        value: 0x00000004
        description: "Green flag is being shown"
      - name: "yellow"
        value: 0x00000008
        description: "Yellow flag is being shown"
      - name: "red"
        value: 0x00000010
        description: "Red flag is being shown"
      - name: "blue"
        value: 0x00000020
        description: "Blue flag is being shown"
      - name: "debris"
        value: 0x00000040
        description: "Debris flag is being shown"
      - name: "crossed"
        value: 0x00000080
        description: "Crossed flags are being shown"
      - name: "yellowWaving"
        value: 0x00000100
        description: "Waving yellow flag is being shown"
      - name: "oneLapToGreen"
        value: 0x00000200
        description: "One lap until green flag"
      - name: "greenHeld"
        value: 0x00000400
        description: "Green flag is being held"
      - name: "tenToGo"
        value: 0x00000800
        description: "Ten laps to go"
      - name: "fiveToGo"
        value: 0x00001000
        description: "Five laps to go"
      - name: "randomWaving"
        value: 0x00002000
        description: "Random waving flags"
      - name: "caution"
        value: 0x00004000
        description: "Caution flag is being shown"
      - name: "cautionWaving"
        value: 0x00008000
        description: "Waving caution flag is being shown"
      - name: "black"
        value: 0x00010000
        description: "Black flag is being shown"
      - name: "disqualify"
        value: 0x00020000
        description: "Disqualification flag is being shown"
      - name: "servicible"
        value: 0x00040000
        description: "Car is serviceable"
      - name: "furled"
        value: 0x00080000
        description: "Furled flag is being shown"
      - name: "repair"
        value: 0x00100000
        description: "Car needs repair"
      - name: "startReady"
        value: 0x00400000
        description: "Start is ready"
      - name: "startSet"
        value: 0x00800000
        description: "Start is set"
      - name: "startGo"
        value: 0x01000000
        description: "Start is go"

  TrackLocation:
    type: enum
    description: "Location of the car on the track."
    values:
      - name: "NotInWorld"
        value: -1
        description: "Car is not in the world."
      - name: "OffTrack"
        value: 0
        description: "Car is off track."
      - name: "OnTrack"
        value: 1
        description: "Car is on track."
      - name: "ApproachingPits"
        value: 2
        description: "Car is approaching the pits."
      - name: "OnPitRoad"
        value: 3
        description: "Car is on pit road."

session:
  header:
    fields:
      - name: SessionId
        type: int32
        description: "Unique identifier for the session"
        tags: ["session"]

      - name: SessionNum
        type: int32
        description: "Session number within the event"
        tags: ["session"]

  footer:
    fields:
      - name: FinalPosition
        type: int32
        description: "Final finishing position in the session"
        tags: ["result", "summary"]

      - name: FastestLapTime
        type: float32
        description: "Fastest lap time achieved in the session"
        unit: "seconds"
        tags: ["lap", "summary"]

      - name: AverageLapTime
        type: float32
        description: "Average lap time across all completed laps"
        unit: "seconds"
        tags: ["lap", "summary"]

frame:
  fields:
    - name: SessionState
      type: SessionState
      description: "Current state of the session"
      tags: ["session"]

    - name: SessionTime
      type: float64
      description: "Current session time in seconds"
      tags: ["session"]

    - name: Flags
      type: SessionFlags
      description: "Current session flags"
      tags: ["session"]

    - name: Brake
      type: float32
      description: "Brake pedal position (0.0 to 1.0)"
      tags: ["inputs"]

    - name: Throttle
      type: float32
      description: "Throttle pedal position (0.0 to 1.0)"
      tags: ["inputs"]

    - name: Clutch
      type: float32
      description: "Clutch pedal position (0.0 to 1.0)"
      tags: ["inputs"]

    - name: Gear
      type: int32
      description: "Current gear (-1=reverse, 0=neutral, 1+=forward gears)"
      tags: ["inputs"]

    - name: SteeringWheelAngle
      type: float32
      description: "Steering wheel angle in radians"
      tags: ["inputs"]

    - name: AirTemperature
      type: float32
      description: "Ambient air temperature"
      unit: "celsius"
      tags: ["environment"]

    - name: TrackTemperature
      type: float32
      description: "Track surface temperature"
      unit: "celsius"
      tags: ["environment"]

    - name: Skies
      type: int32
      description: "Sky condition (0=clear, 1=partly cloudy, 2=mostly cloudy, 3=overcast)"
      tags: ["environment"]

    - name: Precipitation
      type: float32
      description: "Precipitation level at start/finish line (0.0 to 1.0)"
      tags: ["environment"]

    - name: TrackWetness
      type: int32
      description: "Track wetness level (0=dry to 5=very wet)"
      tags: ["environment"]

    - name: TrackLocation
      type: TrackLocation
      description: "Current location of the car relative to the track"
      tags: ["environment"]

    - name: Speed
      type: float32
      description: "Current vehicle speed"
      unit: "meters_per_second"
      tags: ["outputs"]

    - name: Rpm
      type: float32
      description: "Current engine RPM"
      unit: "rpm"
      tags: ["outputs"]

    - name: ZeroRpm
      type: float32
      description: "Engine RPM at idle"
      unit: "rpm"
      tags: ["outputs"]

    - name: CurrentLap
      type: int32
      description: "Current lap number"
      tags: ["lap"]

    - name: LapsCompleted
      type: int32
      description: "Total number of completed laps"
      tags: ["lap"]

    - name: LapDistPct
      type: float32
      description: "Percentage of current lap completed (0.0 to 1.0)"
      tags: ["lap"]

    - name: LapDist
      type: float32
      description: "Distance traveled in current lap"
      unit: "meters"
      tags: ["lap"]

    - name: CurrentLapTime
      type: float32
      description: "Time elapsed in current lap"
      unit: "seconds"
      tags: ["lap"]

    - name: LastLapTime
      type: float32
      description: "Time of the last completed lap"
      unit: "seconds"
      tags: ["lap"]

    - name: BestLapTime
      type: float32
      description: "Best lap time in the session"
      unit: "seconds"
      tags: ["lap"]

    - name: OnJokerLap
      type: bool
      description: "Whether currently completing a joker lap"
      tags: ["status"]

    - name: PitStopActive
      type: bool
      description: "Whether the car is currently receiving pit service"
      tags: ["status"]

    - name: OnPitRoad
      type: bool
      description: "Whether the car is on pit road between the cones"
      tags: ["status"]

    - name: TowTime
      type: float32
      description: "Time remaining for towing (greater than zero if being towed)"
      unit: "seconds"
      tags: ["status"]

    - name: TireCompound
      type: int32
      description: "Current tire compound index"
      tags: ["status"]

    - name: PushToPassEngaged
      type: bool
      description: "Whether push-to-pass is currently engaged"
      tags: ["status"]

    - name: FuelLevel
      type: float32
      description: "Current fuel level"
      unit: "liters"
      tags: ["fuel"]

    - name: FuelLevelPercent
      type: float32
      description: "Current fuel level as a percentage of capacity (0.0 to 1.0)"
      tags: ["fuel"]

    - name: IncidentPoints
      type: int32
      description: "Total incident points accumulated in the session"
      tags: ["status"]
